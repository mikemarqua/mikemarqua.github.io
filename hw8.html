<!DOCTYPE html>
	<html lang="en">
	<head>
		<title>Homework 8 - AJAX Application</title>
		<meta charset="utf-8">
		<meta name="description" content="JavaScript assignments at CSM, programming with JavaScript and AJAX">
  	<script>
    function loadDoc()
  //create a new XMLHttpRequest
  const xhttp = new XMLHttpRequest();
  //initiate transfer of XML file to myFunction once HttpRequest is successful and received
  xhttp.onload = function() {
    myFunction(this);
  }
  //get file titled "cd_catalog.xml" from the server
  xhttp.open("GET", "cd_catalog.xml");
  xhttp.send();
}
function myFunction(xml) {
//read XML document retrieved from above function; comes into myFunction as "xml"
  const xmlDoc = xml.responseXML;
  //create variable by each CD in the XML file
  const x = xmlDoc.getElementsByTagName("CD");
  //create table header (first row) using Artist and Title
  let table="<tr><th>Artist</th><th>Title</th></tr>";
  //create remaining table rows for ARTIST and TITLE elements from xmlDoc
  for (let i = 0; i <x.length; i++) { 
    table += "<tr><td>" +
    x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue +
    "</td><td>" +
    x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue +
    "</td></tr>";
  }
  //populate catalogTable with the table created above
  document.getElementById("catalogTable").innerHTML = table;
}
    </script>
    <style>
	body {
		background-color: gray;
    	}
	a:link {
  		color: white;
	}
	a:visited {
  	  	color: yellow;
	}
	a:hover {
  	  	color: black;
	}
	a:active {
  	  	color: red;
	}
  label {
        font-family: calibri;
      	color: white;
      	display: inline-block;
      	width: 325px;
  }
	ul {
      	font-family: calibri;
      	display: inline;
      	color: white;
  }
  li {
      	background-color: transparent; 
      	border-radius: 2px;
  		  text-align: left;
  		  font-size: 16px;
  		  cursor: pointer;
  }
  li:hover {
      	background-color: white;
      	color: black;
      	width: fit-content;
  }
  h1, h2 {
      	font-family: calibri;
		  color: white;
  }
    	footer {
      		font-family: calibri;
      		font-size: 80%;
		color: white;
    	}	
	p {
    		font-family: calibri;
		color: white;
    	}
table,th,td {
  border : 1px solid white;
  border-collapse: collapse;
}
th,td {
  padding: 5px;
	font-family: calibri;
		color: white;
}
	</style>
	</head>
	<body>
	<header>
		<h1>Homework 8 - AJAX Application</h1>
	</header>
    
<button type="button" onclick="loadDoc()">Get CD collection</button>
<br><br>
<table id="catalogTable"></table>
<header>
<h2>Explanation of AJAX</h2>
</header>
<p>The above button calls a JavaScript script, which houses two separate functions to create, request, and process receipt of XML data from a given server. The first function creates and pushes the XMLHttpRequest to ther server; in this case, it is the same server hosting this HTML file. It requests to "GET" the specific file from the server. Once received successfully back from the server, this function then sends it to the second function for processing.</p>
<p>The second function first reads the document received. It then builds out the table from the provided XML information into HTML/CSS for the end user to see on screen. Only this data received via the XMLHttpRequest will need to be updated on the HTML page.</p>
	<footer>
		<p><a href="hw1.html">Click to go back to the assignment list.</a></p>
		</footer>
	</body>
</html>
